// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: session.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createGameSession = `-- name: CreateGameSession :one
INSERT INTO vocab_game_sessions (
    user_id, mode, source_language_id, target_language_id,
    topic_id, level_id, total_questions, correct_questions,
    started_at
) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
RETURNING id, started_at
`

type CreateGameSessionParams struct {
	UserID           int64            `json:"user_id"`
	Mode             string           `json:"mode"`
	SourceLanguageID int16            `json:"source_language_id"`
	TargetLanguageID int16            `json:"target_language_id"`
	TopicID          pgtype.Int8      `json:"topic_id"`
	LevelID          pgtype.Int8      `json:"level_id"`
	TotalQuestions   pgtype.Int2      `json:"total_questions"`
	CorrectQuestions pgtype.Int2      `json:"correct_questions"`
	StartedAt        pgtype.Timestamp `json:"started_at"`
}

type CreateGameSessionRow struct {
	ID        int64            `json:"id"`
	StartedAt pgtype.Timestamp `json:"started_at"`
}

func (q *Queries) CreateGameSession(ctx context.Context, arg CreateGameSessionParams) (CreateGameSessionRow, error) {
	row := q.db.QueryRow(ctx, createGameSession,
		arg.UserID,
		arg.Mode,
		arg.SourceLanguageID,
		arg.TargetLanguageID,
		arg.TopicID,
		arg.LevelID,
		arg.TotalQuestions,
		arg.CorrectQuestions,
		arg.StartedAt,
	)
	var i CreateGameSessionRow
	err := row.Scan(&i.ID, &i.StartedAt)
	return i, err
}

const endGameSession = `-- name: EndGameSession :exec
UPDATE vocab_game_sessions 
SET ended_at = $2 
WHERE id = $1
`

type EndGameSessionParams struct {
	ID      int64            `json:"id"`
	EndedAt pgtype.Timestamp `json:"ended_at"`
}

func (q *Queries) EndGameSession(ctx context.Context, arg EndGameSessionParams) error {
	_, err := q.db.Exec(ctx, endGameSession, arg.ID, arg.EndedAt)
	return err
}

const findGameSessionByID = `-- name: FindGameSessionByID :one
SELECT id, user_id, mode, source_language_id, target_language_id,
       topic_id, level_id, total_questions, correct_questions,
       started_at, ended_at
FROM vocab_game_sessions
WHERE id = $1
`

func (q *Queries) FindGameSessionByID(ctx context.Context, id int64) (VocabGameSession, error) {
	row := q.db.QueryRow(ctx, findGameSessionByID, id)
	var i VocabGameSession
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Mode,
		&i.SourceLanguageID,
		&i.TargetLanguageID,
		&i.TopicID,
		&i.LevelID,
		&i.TotalQuestions,
		&i.CorrectQuestions,
		&i.StartedAt,
		&i.EndedAt,
	)
	return i, err
}

const updateGameSession = `-- name: UpdateGameSession :exec
UPDATE vocab_game_sessions
SET total_questions = $2,
    correct_questions = $3,
    ended_at = $4
WHERE id = $1
`

type UpdateGameSessionParams struct {
	ID               int64            `json:"id"`
	TotalQuestions   pgtype.Int2      `json:"total_questions"`
	CorrectQuestions pgtype.Int2      `json:"correct_questions"`
	EndedAt          pgtype.Timestamp `json:"ended_at"`
}

func (q *Queries) UpdateGameSession(ctx context.Context, arg UpdateGameSessionParams) error {
	_, err := q.db.Exec(ctx, updateGameSession,
		arg.ID,
		arg.TotalQuestions,
		arg.CorrectQuestions,
		arg.EndedAt,
	)
	return err
}
